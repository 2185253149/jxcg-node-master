!function(e){window.Promise||(window.Promise=e.Promise),window.Vue?Vue.prototype.setData=function(e){if(e&&"object"==typeof e)for(let t in e)this[t]=e[t]}:window.Vue=e.Vue,window.$||(window.$=e.$),document.getElementById("App").className=e.platform,"Web"==e.platform?(e.Storage.set("pxScale",1,{type:3}),e.Storage.set("Theme",{Modal:{boxStyle:{width:"240px",borderRadius:"8px"},styles:{modalTitle:"height:auto;font-size:18px;font-wight:bold;padding:16px;border-bottom:1px solid #f1f1f1;text-align:left;",modalContent:"min-height: 0px;padding:32px;font-size:14px;",modalBtn:"height:40px;line-height:40px;display:block;text-align:right;border-color:#f1f1f1;",modalCancel:"padding:5px 12px;border:1px solid #ccc;margin-right:16px;border-radius:3px;cursor:pointer;",modalConfirm:"padding:5px 12px;border:1px solid #ccc;margin-right:16px;border-radius:3px;cursor:pointer;"}},Picker:{pickCover:"font-size:12px;opacity:0.01;filter:alpha(opacity=1);",pickBox:"position:absolute;left:0px;top:0px;bottom:auto;width:240px;background:#ffffff;border:1px solid #ccc;border-radius:8px;",pickTitle:"height:40px;line-height:40px;background:#F7FBFD;overflow:hidden;",titleText:"height:40px;line-height:40px;float:left;",pickContent:"height:200px;overflow:hidden;",pickBtn:"cursor:pointer;float:left;width:48px;color:#03A9F4;font-size:14px;border:1px solid #F7FBFD;height:32px;line-height:32px;text-align:center;margin-top:3px;border-radius:3px;",btnCancel:"margin-left:8px;",btnSelect:"float:right;margin-right:8px;",pickItem:"height:40px;line-height:40px;cursor:pointer;",Select:{itemHeight:40,itemsHeight:200,click:!0}},SelectH5_bindType:"mousewheel"},{type:3})):e.Storage.set("Theme",{},{type:3}),e.createCanvasContext=function(e){var t=document.getElementById(e).getContext("2d");return t.setFillStyle=function(e){t.fillStyle=e},t.draw=function(){},t},e.showToast=function(t){"string"==typeof t&&(t={title:t}),"Web"==e.platform&&(t.boxStyle={borderRadius:"5px"},t.icon="none"),e.Toask.open(t)},e.toask=function(t){return e.showToast({title:t,icon:"none",duration:3e3}),new Promise(e=>{setTimeout(e,3e3)})},e.hideToast=function(){e.Toask.close()},e.showLoading=function(t){(t=t||{}).loading=!0,"Web"==e.platform&&(t.boxStyle={background:"none",color:"#ccc"}),e.Toask.open(t)},e.showModal=function(t){e.Modal.modal(t)},e.confirmx=function(t,n,o){e.Modal.confirm(t&&"object"==typeof t?JSON.stringify(t):t,n,o)},e.confirm=function(t){return new Promise((n,o)=>{e.confirmx(t,n,o)})},e.alertx=function(t,n){e.Modal.alert(t&&"object"==typeof t?JSON.stringify(t):t,n)},e.alert=function(t){return new Promise(n=>{e.alertx(t,n)})},e.hideLoading=function(){e.Toask.close()},e.getLocation=function(e){e=e||{},navigator.geolocation.getCurrentPosition(e.success,e.fail)},e.getSystemInfoSync=function(){var e={};for(var t in window.screen)e[t]=window.screen[t];return e},e.setNavigationBarTitle=function(e){document.getElementsByTagName("title")[0].text=e.title},e.$callback=function(t){try{var n=e.date(new Date).only();return window["_"+n]=function(e){t(e),delete window["_"+n]},"_"+n}catch(e){return""}},e.History={container:document.getElementById("App"),_pageStack:[],_configs:[],_pageAppend:function(){},_defaultPage:null,_pageIndex:1,setDefault:function(e,t){var n=this;t instanceof Array&&t.forEach(function(e){n.push(e)}),this._find(e,function(e){n._defaultPage=e,n.init()})},setPageAppend:function(e){return this._pageAppend=e,this},getCurrentPage:function(){return this._pageStack[this._pageStack.length-1]},stopHashChange:!1,hash:location.hash,init:function(){var e=this;window.onhashchange=function(){if(e.hash=location.hash,e.stopHashChange)return!1;var t=history.state||{},n=0===location.hash.indexOf("#")?location.hash.replace("#",""):"";n=n.replace(/\//g,"_").replace(/^_/,""),e._find(n,function(o){t._pageIndex<=e._pageIndex||e._findInStack(n)?e._back(o):e._go(o)})},history.state&&history.state._pageIndex&&(this._pageIndex=history.state._pageIndex),this._pageIndex--;var t=0===location.hash.indexOf("#")?location.hash.replace("#",""):"";t=t.replace(/\//g,"_").replace(/^_/,""),e._find(t,function(t){e._go(t)})},param:"",reload:!0,noReload:!1,load:function(){this.reload=!0;var e=this._pageStack[this._pageStack.length-1];e&&this._back(e.config)},push:function(e){return this._configs.push(e),this},go:function(t,n){var o=this;this.reload=!!n||this.reload,this._find(t,function(t){t&&(location.hash=o.param?t.name+"?"+o.param:t.name,e.isIE7&&o.hash!=location.hash&&window.onhashchange())})},currentPage:"",_go:function(t){this._pageIndex++,history.replaceState&&history.replaceState({_pageIndex:this._pageIndex},"",location.href);var n=e.creatElement("div",{className:"page "+t.name,innerHTML:t.template}),o=n.className;n.className+=" slideIn",this.currentPage&&(this.currentPage.className=this.currentPage.className.replace(" js_display_block","")),this.currentPage=n,setTimeout(function(){n.className=o+" js_show js_display_block"},200),this.container.appendChild(n);for(var i=n.getElementsByTagName("script"),a=0;a<i.length;a++){var r=i[a].innerHTML;n.removeChild(i[a]),n.appendChild(e.creatElement("script",{type:"text/javascript",text:r}))}return this._pageAppend.call(this,n),this._pageStack.push({config:t,dom:n}),this.reload=!1,this},back:function(){history.back(),e.isIE7&&window.onhashchange()},_back:function(t){var n=this;this._pageIndex--;var o=this._pageStack.pop();if(o){var i=0===location.hash.indexOf("#")?location.hash.replace("#",""):"";i=i.replace(/\//g,"_").replace(/^_/,"");var a=this._findInStack(i);if(this.currentPage&&(this.currentPage.className=this.currentPage.className.replace(" js_display_block","")),a)this.currentPage=a.dom,a.dom.className+=" js_display_block",this.container.insertBefore(a.dom,o.dom);else{var r=e.creatElement("div",{className:"page "+t.name,innerHTML:t.template.replace("<template>",'<div id="'+t.name+'">').replace("</template>","</div>")});r.className;r.className+=" js_show js_display_block",this.currentPage=r,this.container.insertBefore(r,o.dom);for(var s=r.getElementsByTagName("script"),c=0;c<s.length;c++){var l=s[c].innerHTML;r.removeChild(s[c]),r.appendChild(e.creatElement("script",{type:"text/javascript",text:l}))}this._pageStack.push({config:t,dom:r})}return this.reload?this.container.removeChild(o.dom):(o.dom.className+=" slideOut",setTimeout(function(){n.container.removeChild(o.dom)},200)),this.reload=!1,this}},_findInStack:function(e){e=e.split("?")[0];for(var t=null,n=[],o=0,i=this._pageStack.length;o<i;o++){var a=this._pageStack[o];a.config.name===e?a.config.reload||this.reload?this.container.removeChild(a.dom):(t=a,n.push(a)):n.push(a)}return this._pageStack=n,""==e&&(t=this._pageStack[0]),t},ajaxPage:function(t,n,o){var i=this,a=null,r=!1===n?t.replace(new RegExp("_","g"),"/")+".html":this._configs[n].url;new e.Ajax(r,function(e,s){if(s)a=i._defaultPage;else{let o=(e=e.replace(/^<template>/,`<div id="${t}" class="scroll" style="height:100%;display:none;">`)).lastIndexOf("</template>");e=(e=e.substr(0,o)+"</div>"+e.substring(o+11,e.length-1)).replace("G.vue({",`G.vue("${t}",{`),/<style(.+)scoped.*>/.test(e)&&(e=(e=(e=(e=e.replace(/\.(\w+){/gim,"#"+t+"  .$1{").replace(/,\.(\w+){/gim,",#"+t+"  .$1{")).replace(new RegExp("#"+t+" .Web","gmi"),".Web #"+t)).replace(/rpx/gim,"px").replace(/^page(.*){|\spage(.*){/gi,"$1{")).replace(/<style(.+)scoped.*>/,`<style id="page_style_${t}" scoped>`)),!1===n?(a={name:t,url:r,template:e},i.push(a)):(i._configs[n].template=e,a=i._configs[n])}o.call(i,a)},{dataType:"html",noLoginAction:!0,noBeforeLoginAction:!0}).action()},getParam:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=this.param?this.param.match(t):"";return n&&n[2]?decodeURIComponent(n[2]):null},_find:function(e,t){this.param=e.split("?")[1];e=e.split("?")[0];var n=this,o=null;if(n._defaultPage&&""==e)t.call(n,n._defaultPage);else{for(var i=!1,a=0,r=this._configs.length;a<r;a++)if(this._configs[a].name===e){o=this._configs[a],i=a;break}o&&o.template?t.call(n,o):this.ajaxPage(e,i,function(e){t.call(n,e)})}},home:function(){location.hash=this._defaultPage.name,e.isIE7&&window.onhashchange()}},Vue.prototype.selectComponent=function(e){let t=this.$refs[e.replace("#","")];return t instanceof Array?t[0]:t},Vue.prototype.getData=function(t){return"object"==typeof this[t]&&this[t]?e.clone(this[t],!0):this[t]},Vue.prototype.computStyle=function(t,n){return e.computStyle(t,n)},Vue.prototype.on=function(t,n,o,i){var a=this;if(!t.srcElement["bind"+o]){t.srcElement["bind"+o]=!0;var r=e.on(t.srcElement,n,function(e){"function"==typeof a[o]&&a[o].apply(a,e,i)});r&&r[0]&&"function"==typeof r[0]&&r[0](t)}},window.Storage||e.Storage.setLocalStorage({setItem:function(t,n){e.Cookie.Set(t,n,10,"/")},getItem:function(t){return e.Cookie.Get(t)},removeItem:function(t){e.Cookie.Delete(t)}}),e.$go=function(t,n){"navigateBack"==n?e.History.back():/^live/.test(t)||/^miniApp/.test(t)?e.alertx("请使用小程序端打开!"):(t="string"==typeof t?t:t.url,e.History.go(t,!0))},e.reEnter=function(t){e.History.stopHashChange=!0,location.hash=t.replace(/\//g,"_").replace("_",""),location.reload()};var t={};function n(n,o){return new Promise(function(i,a){if(t[n])i();else{t[n]=!0;var r=o.replace(/\//g,"_").replace("_","");window[r]=function(a,s){var c={};if((s=s||{}).props)for(var l in s.props)s.props[l].observer&&(c[l]=s.props[l].observer);s.methods=s.methods||{},(s=e.common.call(e,s,"component")).methods.triggerEvent=function(e,t){this.$emit(e,{type:e,detail:t})},s.watch=c;var p=document.getElementById("TEMPLATE"+r);s.template=p.innerHTML,e.body.removeChild(p),t[n]=s,s.data&&"function"==typeof s.data||(s.data=function(){return{}}),Vue.component(n,s),Promise.all(e.usingComponents(a)).then(function(){a.noCss?(window[r]=null,i()):e.computCSS(o.replace("/","")+".css",function(){window[r]=null,i()},{id:"componentCSS",replace:function(e){return/scoped/.test(e)&&(e=(e=(e=(e=(e=e.replace(new RegExp("."+r+" .Web","gmi"),".Web ."+r)).replace(new RegExp("."+r+" .iOS","gmi"),".iOS ."+r)).replace(new RegExp("."+r+" .Android","gmi"),".Android ."+r)).replace(/rpx/gim,"px").replace(/^page|\spage/gim,"")).replace(/@import\s[^;]+;/g,"").replace("/* scoped */","")),e}})})},new e.Ajax("."+o+".html?_="+(new Date).getTime(),function(t,n){n||(e.creatElement("div",{id:"TEMPLATE"+r,style:{display:"none"},innerHTML:t.replace("<template>",'<div class="'+r+'">').replace("</template>","</div>"),parent:!0}),e.creatElement("script",{attr:{type:"text/javascript",src:"."+o+".js?_="+(new Date).getTime()},id:"JSONP"+r,parent:!0}))},{dataType:"html",noLoginAction:!0}).action()}})}e.usingComponents=function(t){(t=t||{})[e.platform]&&e.merge(t,t[e.platform]),t.usingComponents=t.usingComponents||{};var o=[],i=0;for(var a in t.usingComponents)!function(e){o[i]=n(e.toLowerCase(),t.usingComponents[e]),i++}(a);return o},e.App=function(t,n){function o(){e.Storage.set("AppConfig",t,2),e.Storage.set("logined",!1,2);var o={},i=e.History.param;if(i){i=decodeURI(i).split("&");for(var a=0;a<i.length;a++){var r=i[a].split("=")[0];o[r]=i[a].replace(new RegExp(r+"="),"")}}n.init&&n.init(o);var s=new e.Item;s._push(function(e){n.onLaunch&&n.onLaunch(o),e()});e.Storage.set("autoLogin",function(t){e.Storage.get("logined",2)&&(s=new e.Item,e.Storage.set("logined",!1)),s._push(function(e){t(),e()}),n.autoLogin(function(){s._do(),e.Storage.set("logined",!0)},function(t){s=new e.Item,e.Storage.get("logined")||s._push(function(e){n.onLaunch&&n.onLaunch(o),e()}),e.reEnter(n.onLogin?n.onLogin:"/pages/err/err?msg="+t)})},2),n.Interceptor&&e.Storage.set("loginAction",n.Interceptor,{type:2}),t.Web=t.Web||{},t.Web.defaultPage=t.Web.defaultPage||t.pages[0]||"pages/index/index",e.computCSS("./css/style.css",function(){e.computCSS("./css/common.css",function(){e.computCSS("./css/app.css",function(){e.History.setDefault(t.Web.defaultPage.replace(/\//g,"_"))})})})}(n=e.common.call(e,n,"app")).onError&&(window.onerror=n.onError);var i=e.Storage.get("cloudenv");i?cloud.init(i).then(o):o()},e.vue=function(t,n,o){n=n||{},(o=o||{}).methods=o.methods||{},(o=e.common.call(e,o,"vue")).el="#"+t,o.components=o.components||{};var i={},a=o.created;o.created=function(){this.data=this._data;var n=this,o=e.History.param;this.onPullDownRefresh&&e.Storage.set("onPullDownRefresh_"+t,this.onPullDownRefresh);var r=e.History.getCurrentPage(),c=0;if("Web"!=e.platform&&e.on(document.getElementById(t),"scroll",function(e){r.dom._scrollTop=this.scrollTop,"function"==typeof n.onReachBottom&&!c&&this.scrollHeight-this.scrollTop-this.offsetHeight<50&&(n.onReachBottom(),c=setTimeout(function(){clearTimeout(c),c=0},3e3))}),o){o=decodeURI(o).split("&");for(var l=0;l<o.length;l++){var p=o[l].split("=")[0];i[p]=o[l].replace(new RegExp(p+"="),"")}}a&&s(this,a)};var r=o.mounted;function s(t,n){setTimeout(function(){o.noLogin||e.Storage.get("logined")?n&&n.call(t,i):e.Storage.get("autoLogin")(function(){n&&n.call(t,i)})},300)}o.mounted=function(){(r||!a&&!r)&&s(this,r)},Promise.all(e.usingComponents(n)).then(()=>new Promise(n=>{document.querySelector("#page_style_"+t)?n():e.computCSS(t.replace(/_/g,"/")+".css",n,{storageName:"css_"+t,parent:document.getElementById(t).parentNode,id:"css_"+t,replace:function(e){return/scoped/.test(e)&&(e=(e=(e=e.replace(/\.(\w+){/gim,"#"+t+"  .$1{").replace(/,\.(\w+){/gim,",#"+t+"  .$1{")).replace(new RegExp("#"+t+" .Web","gmi"),".Web #"+t)).replace(/rpx/gim,"px").replace(/^page|\spage/gim,"")),e}})}).then(()=>{document.getElementById(t).style.display="block",new Vue(o),e.setNavigationBarTitle({title:n.navigationBarTitleText||e.Storage.get("AppConfig").navigationBarTitleText||""})})),Promise.all(e.usingComponents(n)).then(function(){})},e.ajax=function(t,n,o){var i=this;if(!1===(o=o||{}).loading&&(o.loading={}),o.loading=o.loading||{open:function(){e.showLoading&&e.showLoading(),i.setData&&i.setData({submiting:!0})},close:function(){i.setData?setTimeout(function(){e.hideLoading&&e.hideLoading(),i.setData({submiting:!1})},5e3):e.hideLoading&&e.hideLoading()}},e.Storage.get("tcbEnvId")&&!o.UNTCB&&e.cloud)return e.cloud.ajax(t,n,o),!1;0!=(t=t.replace(new RegExp("^{(.+)}","g"),function(t,n){return e.Storage.get(n)||"{"+n+"}"})).indexOf("http")&&(t=e.Storage.get("APIURL")+t),new e.Ajax(t,function(t){!1!==o.errNotify&&t.errorMsg&&e.showToast(t.errorMsg),n(t)},o).action()},e.list=function(t){if(t=t||{},e.Storage.get("tcbEnvId")&&!t.UNTCB&&e.cloud)return e.cloud.list(t);var n="",o=t.get||"";return"string"==typeof o?(n=o,o={}):(n=o.url,o.url=void 0),"string"==typeof n&&(0!=(n=n.replace(new RegExp("^{(.+)}","g"),function(t,n){return e.Storage.get(n)||"{"+n+"}"})).indexOf("http")&&(n=e.Storage.get("APIURL")+n),t.get=new e.Ajax(n,"",o)),new e.List(t)};var o=0,i=document.getElementById("PullDownRefresh");e.canPullDownRefresh=!0,e.on(window,"touchstart",function(t){o>0&&e.stopPullDownRefresh();for(var n=0,a=0;a<t.changedTouches.length;a++)(!n||t.changedTouches[a].clientY<n)&&(n=t.changedTouches[a].clientY);var r=e.History.getCurrentPage();!e.canPullDownRefresh||o||r.dom._scrollTop||"function"!=typeof e.Storage.get("onPullDownRefresh_"+r.config.name)||(o=n,i.innerHTML="<span>释放刷新</span>")}),e.on(window,"touchmove",function(e){for(var t=0,n=0;n<e.changedTouches.length;n++)e.changedTouches[n].clientY>t&&(t=e.changedTouches[n].clientY);o>0&&t-o>0&&(i.style.height=(t-o)/3+"px")}),e.on(window,"touchend",function(t){for(var n=0,a=0;a<t.changedTouches.length;a++)t.changedTouches[a].clientY>n&&(n=t.changedTouches[a].clientY);o>0&&n-o>100&&(e.Storage.get("onPullDownRefresh_"+e.History.getCurrentPage().config.name)(),i.innerHTML="<span>刷新中...</span>")}),e.stopPullDownRefresh=function(){i.style.height="0px",o=0,i.innerHTML=""},e.location=function(){return"/"+location.hash.replace("#","").split("?")[0].replace(/_/g,"/")},e.common.call(e),Vue.component("icon",{template:'<i :style="styles" :class="classes"></i>',props:["type","size","color"],data:function(){return{classes:{"icon-info":!1,"icon-warn":!1,"icon-waiting":!1,"icon-cancel":!1,"icon-download":!1,"icon-search":!1,"icon-clear":!1,"icon-success":!1,"icon-success-no-circle":!1},styles:{fontSize:"",color:"",position:"relative",top:"3px"}}},created:function(){this.styles.color=this.color||"#666",this.styles.fontSize=(this.size||46)+"px",this.type=(this.type||"info").replace(/_/g,"-"),this.classes["icon-"+this.type]=!0}}),Vue.component("navigator",{template:'<span @click="$go"><slot></slot></span>',props:["openType","url"],methods:{$go:function(){e.$go(this.url,this.openType)}}}),Vue.component("switch_",{template:'<span><input v-model="checked" :disabled="disabled" type="checkbox" @change="_change" /><slot></slot></span>',props:["checked","type","disabled","color"],methods:{_change:function(){this.$emit("change",{type:"change",detail:{value:!!this.checked}})}}}),Vue.component("favorite",{template:"<div></div>"}),Vue.component("button_",{props:["type","size","disabled"],template:'<span :class="classes" @click="_click"><slot></slot></span>',data:function(){var e="";return e+=" button",e+=" "+(this.type||"primary"),"mini"===this.size&&(e+=" mini"),this.disabled&&(e+=" disabled"),{classes:e}},methods:{_click:function(){this.$emit("click")}}})}(Y);